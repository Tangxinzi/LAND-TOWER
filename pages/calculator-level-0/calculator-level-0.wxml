<mp-navigation-bar ext-class="navigation-bar" title="计算器" background="#FFF" back="{{ false }}">
  <button slot="left" class="left" open-type="contact">
    <image class="kefu" src="/assets/icons/kefu.png" mode="aspectFill" />
  </button>
</mp-navigation-bar>

<view class="">
  <view class="section flex-between" bind:tap="{{ countArea > 0 ? 'ifReload' : '' }}">
    <text>办公面积 ㎡<text style="color: rgb(238, 93, 93);"> *</text></text>
    <input class="text-right" disabled="{{ countArea > 0 ? true : false }}" type="number" value="{{ input.area || '' }}" data-type="area" bindblur="inputChange" placeholder="输入办公面积 150～2000㎡ 以内" style="width: 70%;" />
  </view>
  <view class="section" style="padding: 0 1em;">
    <view class="picker" style="border: 0;">
      <view class="td">
        <view class="calc-icon">
          <image src="/assets/icons/calc-01.png" mode="aspectFill" />
          <text>人工费</text>
        </view>
      </view>
      <view class="td">
        <view class="calc-icon">
          <image src="/assets/icons/calc-02.png" mode="aspectFill" />
          <text>辅材费</text>
        </view>
      </view>
      <view class="td">
        <view class="calc-icon">
          <image src="/assets/icons/calc-03.png" mode="aspectFill" />
          <text>主材费</text>
        </view>
      </view>
    </view>
    <block wx:if="{{ input.showPrice }}">
      <view class="picker" style="border: 0; padding-top: 0;">
        <text class="td center text-color">¥{{ estimatedNumber[0] }}</text>
        <text class="td center text-color">¥{{ estimatedNumber[1] }}</text>
        <text class="td center text-color">¥{{ estimatedNumber[2] }}</text>
      </view>
      <view class="picker right flex-between">
        <view>建议面积</view>
        <text style="color: {{ countArea > input.area ? 'red' : '#9a9a9a' }}">{{ countArea || '0.00' }}㎡</text>
      </view>
      <view class="picker right flex-between">
        <view>预估总价</view>
        <text data-value="{{ estimatedNumber[0] + estimatedNumber[1] + estimatedNumber[2] }}" style="color: {{ estimatedNumber[3] != count ? 'red' : '#9a9a9a;' }}">¥{{ count || '0.00' }}</text>
      </view>   
    </block>
    <block wx:else>
      <view class="picker" style="border: 0; padding-top: 0;">
        <text class="td center text-color">¥0.00</text>
        <text class="td center text-color">¥0.00</text>
        <text class="td center text-color">¥0.00</text>
      </view>
      <view class="picker right flex-between">
        <view>建议面积</view>
        <text class="text-color">0.00㎡</text>
      </view>
      <view class="picker right flex-between">
        <view>预估总价</view>
        <text class="text-color">¥0.00</text>
      </view>
    </block>
  </view>
  <view style="font-size: 12px; color: #9a9a9a; padding-bottom: 1em;">
    <mp-icon style="margin: 0 0.3em 1em 1em; position: relative; top: -1px;" type="outline" icon="info" color="#999" size="16"></mp-icon> <text>输入办公面积，调整空间需求，计算预估价格</text>
  </view>
  <!-- <view class="section flex-between">
    <input type="number" data-type="phone" bindinput="inputChange" placeholder="留下您的联系方式" />
    <text>联系方式</text>
  </view> -->
  <view class="section" style="padding: 0 0 0 1em;" bind:tap="checkArea">
    <view class="picker" style="border: 0;">
      <text class="td">功能</text>
      <text class="td center">子项</text>
      <text class="td center">数量</text>
    </view>
    <picker wx:for="{{ spaceArea }}" wx:key="spaceArea" data-index="{{ index }}" mode="multiSelector" bindchange="bindMultiPickerChange" value="{{ multiValue[index].value }}" range="{{ multiArray }}">
      <mp-slideview buttons="{{ slideButtons }}" icon="{{ false }}" bindbuttontap="slideButtonTap" data-index="{{ index }}" data-value="{{ item }}" show="{{ slideShow[index] }}" duration="0.5">
        <view class="picker" bind:tap="bindPicker" data-index="{{ index }}">
          <text class="td">{{ index + 1 }}. {{ item }}</text>
          <text class="td center">{{ multiValue[index].text[0] }}</text>
          <view class="td center">
            <text>{{ multiValue[index].text[1] }}</text>
            <mp-icon style="margin: 0 1em 0 .5em;" data-index="{{ index }}" catch:tap="tapSlideShow" class="more" type="field" icon="more" color="#999" size="18"></mp-icon>
          </view>
        </view>
      </mp-slideview>
    </picker>
    
    <picker mode="selector" header-text="添加功能区" class="picker" range="{{ spaceAreaOrignal }}" bindchange="bindSelectorPickerChange">
      <view style="text-align: center; color: #666; width: calc(100vw - 4em);">点击此处添加新的功能需求</view>
    </picker>
  </view>
  <view class="tips">
    <button open-type="contact">
      <text style="font-weight: 800; color: #000;">本计算内容预估面积及价格仅供参考\n<text>如未解决您的问题，请请点击客服进行咨询</text>
      </text>
      <image class="kefu" src="/assets/icons/kefu.png" mode="aspectFill" />
    </button>
  </view>
  <view class="calcs">
    <view class="calc" bind:tap="reload" style="flex: 1; background-color: #025402;">重置计算器</view>
    <view class="calc" bind:tap="calcPrice" style="flex: 3; background-color: #009600;">计算预估总价</view>
  </view>
</view>